---
import BaseLayout from '../layouts/BaseLayout.astro';
import TutorialCard from '../components/TutorialCard.astro';
import SeriesCard from '../components/SeriesCard.astro';
import { getOrganizedTutorials } from '../lib/tutorials';

const { standalone, series } = await getOrganizedTutorials();

// Get 6 most recent items (mix of standalone and series)
const recentStandalone = standalone.slice(0, 4);
const recentSeries = series.slice(0, 2);
---

<BaseLayout title="Home">
  <section class="hero">
    <div class="container">
      <h1>Learning Hub</h1>
      <p class="hero-tagline">Personal tutorials and knowledge base</p>
      <div class="hero-actions">
        <a href="/tutorials/" class="btn btn-primary">Browse Tutorials</a>
        <a href="/paths/" class="btn btn-secondary">Learning Paths</a>
      </div>
    </div>
  </section>

  <section class="recent container">
    <h2>Recent Tutorials</h2>
    <div class="card-grid">
      {recentSeries.map(s => <SeriesCard series={s} />)}
      {recentStandalone.map(t => <TutorialCard tutorial={t} />)}
    </div>
    <p class="view-all">
      <a href="/tutorials/">View all tutorials â†’</a>
    </p>
  </section>
</BaseLayout>

<style>
  .hero {
    padding: 4rem 0;
    text-align: center;
    background: var(--color-bg-soft);
    border-bottom: 1px solid var(--color-border);
  }

  .hero h1 {
    font-size: 2.5rem;
    margin: 0 0 0.5rem;
  }

  .hero-tagline {
    color: var(--color-text-soft);
    font-size: 1.25rem;
    margin: 0 0 2rem;
  }

  .hero-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .btn {
    padding: 0.75rem 1.5rem;
    border-radius: 6px;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.2s ease;
  }

  .btn-primary {
    background: var(--color-primary);
    color: white;
  }

  .btn-primary:hover {
    background: var(--color-primary);
    opacity: 0.9;
    text-decoration: none;
  }

  .btn-secondary {
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    color: var(--color-text);
  }

  .btn-secondary:hover {
    background: var(--color-bg-soft);
    text-decoration: none;
  }

  .recent {
    padding: 3rem 0;
  }

  .recent h2 {
    margin: 0 0 1.5rem;
  }

  .view-all {
    margin-top: 1.5rem;
    text-align: center;
  }

  @media (max-width: 640px) {
    .hero h1 {
      font-size: 2rem;
    }

    .hero-tagline {
      font-size: 1.125rem;
    }
  }
</style>
